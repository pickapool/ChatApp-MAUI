@page "/profile"

@inherits ProfilePageBase

<PageTitle>Profile</PageTitle>
<MudContainer Class="d-flex justify-content-center my-2" Style="height: calc(100vh - 100px); max-width: unset !important">
	<MudItem xs="12" sm="8" md="6" lg="4" xl="3">
		<MudPaper Elevation="1" Class="d-flex flex-column pa-2 gap-2 align-items-center">
			<MudAvatar Size="Size.Large" Class="position-relative" Style="border : 1px solid #d3d3d3;">
				<MudImage Src="@(String.IsNullOrEmpty(GlobalClass.User?.PhotoUrl) ? PhotoHelper._defaultPhoto : GlobalClass.User.PhotoUrl)">
				</MudImage>
				@if (isUploading)
				{
					<MudProgressCircular Class="position-absolute" Indeterminate="true" Color="Color.Primary" Size="Size.Small"></MudProgressCircular>
				}
				</MudAvatar>
			<MudGrid Spacing="3">
				<MudItem xs="12" Class="d-flex flex-row gap-2 justify-content-center">
					<MudButton Variant="Variant.Filled" Color="Color.Default" StartIcon="@Icons.Material.Filled.Camera">Camera</MudButton>
					<MudFileUpload T="IBrowserFile" Accept="*" @bind-File="selectedFile" FilesChanged="UploadFiles">
						<ActivatorContent>
							<MudButton StartIcon="@Icons.Material.Filled.Upload" Variant="Variant.Filled" Color="Color.Default">Upload</MudButton>
						</ActivatorContent>
					</MudFileUpload>
				</MudItem>
				<MudItem xs="12" Class="text-center">
					<MudButton OnClick="GetVerificationEmailLink" Disabled="@(GlobalClass.User.EmailVerified)" Variant="Variant.Text" Color="Color.Primary">
						@(GlobalClass.User.EmailVerified ? "The account has been verified" : "Verify Account")
					</MudButton>
				</MudItem>
				<MudItem xs="12">
					<hr />
				</MudItem>
				<MudItem xs="12">
					<MudTextField @bind-Value="GlobalClass.User.DisplayName" Variant="Variant.Filled" Margin="Margin.Dense" Label="Full name" ShrinkLabel></MudTextField>
				</MudItem>
			</MudGrid>
		</MudPaper>
	</MudItem>
</MudContainer>